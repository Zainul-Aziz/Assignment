<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Muli:ital,wght@0,400;1,200&display=swap" rel="stylesheet">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js"></script>

</head>
<body>
    <div>
      <div class="table table-responsive">
        <table id="main_table" class="table table-bordered  table-striped table-hover text-center">
            <thead class="thead-dark">
              <th >Serial Number</th>
              <th >Name</th>
              <th >Update</th> 
              <th >Delete</th>    
            </thead>
            <tbody>
              <tr></tr>
            </tbody>
          
        </table>
        <div class="d-flex justify-content-center">
          <button  type="button" class="btn btn-dark" data-toggle="modal" data-target="#myModal">
            Add User
          </button>
        </div>
      </div>
    </div>
    
      <!-- The Modal -->
      <div class="modal fade" id="myModal">
        <div class="modal-dialog" >
          <div class="modal-content">
          
            <!-- Modal Header -->
            <div class="modal-header">
              <h4 class="modal-title" >Add User</h4>
              <button type="button" class="close" data-dismiss="modal">&times;</button>
            </div>
            
            <!-- Modal body -->
            <div class="modal-body">
              <label for="name">Enter Name</label>
              <input type="text" id="new_user" class="form-control" placeholder="Enter User Name" autocomplete="off" required>
            </div>
            
            <!-- Modal footer -->
            <div class="modal-footer">
              <button type="button" id="okay_new" class="btn btn-success" data-dismiss="modal">okay</button>
              <button type="button" class="btn btn-danger" data-dismiss="modal">cancel</button>
            </div>
            
          </div>
        </div>
      </div>
      
      <script type="text/javascript">
      var count = 1;
        $(document).ready(function(){
            $('#okay_new').click(function(){
                var user = document.getElementById('new_user').value;
                if(user.length !== 0)
                {
                var table = document.getElementById('main_table');
                var row = table.insertRow();
                var cell1 = row.insertCell(0);
                var cell2 = row.insertCell(1);
                var cell3 = row.insertCell(2);
                var cell4 = row.insertCell(3);
                cell1.innerHTML = count;
                count+=1;
                cell2.innerHTML = user;
                cell3.innerHTML = '<i class="fa fa-pencil-square-o itag" id="editBtn" onclick="update(this)" data-toggle="modal" data-target="" ></i>';
                cell4.innerHTML ='<i id="upbtn" class="fa fa-trash itag"  data-toggle="modal" data-target="" onclick="deleteRow(this)" ></i>';
                var modal_input_field = document.getElementById("myModal");
                modal_input_field.setAttribute("input","Enter User Name");
                }
                else
                {
                  alert("Username Cannot Be Empty.");
                  return;
                }
            })    
        });

    </script>
    <script>
        
        function deleteRow(r) {
            var userconfirmation = confirm("Are You Sure To Delete ? Click ok to Delete");
            if(userconfirmation == true)
            {
                count = count-1;
                var i = r.parentNode.parentNode.rowIndex;
                document.getElementById("main_table").deleteRow(i);
            }
            else
            {
                return ;
            }
        }
    </script>

    <script>
        var oTable = document.getElementById("main_table");
        function update(obj)
        {
          var j = obj.parentNode.parentNode.rowIndex;
          var active_name = document.getElementById("main_table").rows[j].cells[1].innerHTML;
            var new_user = prompt("Enter a new username:",active_name);
            if(new_user.length > 0)
            {
            
            //alert(document.getElementById("main_table").rows[j].cells[1].innerHTML);
            /*
            var data = oTable.rows.item(1).cell;
            var new_name = prompt("Enter a new name");
            oTable.row.item(1) = new_name;
            */
            document.getElementById("main_table").deleteRow(j);
            var table = document.getElementById('main_table');
            var row = table.insertRow(j);
            var cell1 = row.insertCell(0);
            var cell2 = row.insertCell(1);
            var cell3 = row.insertCell(2);
            var cell4 = row.insertCell(3);
            cell1.innerHTML = j;
            cell2.innerHTML = new_user;
            cell3.innerHTML = '<i class="fa fa-pencil-square-o" onclick="update(this)" ></i>';
            cell4.innerHTML ='<i class="fa fa-trash" onclick = "deleteRow(this)"></i>';
            
            }
            else
            {
                alert("Name cannot be empty");
            }
        }
    </script>
    <script>/*
      function update(obj)
      {
        var j="",btn="",edit_btn_modal="",edit_field="";
        var j = obj.parentNode.parentNode.rowIndex;
        var btn = document.getElementById('upbtn');
        btn.setAttribute("data-target","#updateModal");
        var edit_btn_modal =document.getElementById('edit_okay');
        edit_btn_modal.setAttribute("value",j);
        var edit_field =document.getElementById('edit_user');
        edit_field.setAttribute('placeholder',j);
        var j="",btn="",edit_btn_modal="",edit_field="";
      }*/
    </script>
</body>
</html>